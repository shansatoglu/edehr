<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Medication Administration Records - MAR | EdEHR a prototype project</title>
    <meta name="description" content="EdEHR is an open source, LTI-compatable learning tool for students in post-secondary medical programs. EdEHR gives students the opportunity to learn about Electronic Health Record (EHR) systems in a classroom or sim lab setting before working in a professional environment.">
    
    
    <link rel="preload" href="/edehr/assets/css/0.styles.345de456.css" as="style"><link rel="preload" href="/edehr/assets/js/app.359ae618.js" as="script"><link rel="preload" href="/edehr/assets/js/2.4b83f28f.js" as="script"><link rel="preload" href="/edehr/assets/js/27.9258d714.js" as="script"><link rel="prefetch" href="/edehr/assets/js/10.24b12149.js"><link rel="prefetch" href="/edehr/assets/js/11.68e208ea.js"><link rel="prefetch" href="/edehr/assets/js/12.34968f0e.js"><link rel="prefetch" href="/edehr/assets/js/13.e8696be7.js"><link rel="prefetch" href="/edehr/assets/js/14.a45c72ba.js"><link rel="prefetch" href="/edehr/assets/js/15.e3a52f6f.js"><link rel="prefetch" href="/edehr/assets/js/16.33a4d697.js"><link rel="prefetch" href="/edehr/assets/js/17.c438eebe.js"><link rel="prefetch" href="/edehr/assets/js/18.b5fd6352.js"><link rel="prefetch" href="/edehr/assets/js/19.cc1df4c2.js"><link rel="prefetch" href="/edehr/assets/js/20.0bc80870.js"><link rel="prefetch" href="/edehr/assets/js/21.e253ffbe.js"><link rel="prefetch" href="/edehr/assets/js/22.1790c368.js"><link rel="prefetch" href="/edehr/assets/js/23.1b662464.js"><link rel="prefetch" href="/edehr/assets/js/24.9c7a6157.js"><link rel="prefetch" href="/edehr/assets/js/25.ec70d432.js"><link rel="prefetch" href="/edehr/assets/js/26.0c4d158c.js"><link rel="prefetch" href="/edehr/assets/js/28.fc7875f4.js"><link rel="prefetch" href="/edehr/assets/js/29.b0dffcb2.js"><link rel="prefetch" href="/edehr/assets/js/3.62eecb63.js"><link rel="prefetch" href="/edehr/assets/js/30.2fe708a9.js"><link rel="prefetch" href="/edehr/assets/js/31.4029c81f.js"><link rel="prefetch" href="/edehr/assets/js/32.240c5102.js"><link rel="prefetch" href="/edehr/assets/js/33.fa961ae7.js"><link rel="prefetch" href="/edehr/assets/js/34.ba15ed4e.js"><link rel="prefetch" href="/edehr/assets/js/35.1f988d56.js"><link rel="prefetch" href="/edehr/assets/js/36.10b9b992.js"><link rel="prefetch" href="/edehr/assets/js/37.50967fa7.js"><link rel="prefetch" href="/edehr/assets/js/38.95698a8e.js"><link rel="prefetch" href="/edehr/assets/js/39.7c93e652.js"><link rel="prefetch" href="/edehr/assets/js/4.0eb6cae1.js"><link rel="prefetch" href="/edehr/assets/js/40.e07bff05.js"><link rel="prefetch" href="/edehr/assets/js/41.0570886e.js"><link rel="prefetch" href="/edehr/assets/js/42.97650c42.js"><link rel="prefetch" href="/edehr/assets/js/43.565b2d4c.js"><link rel="prefetch" href="/edehr/assets/js/44.5fc105b5.js"><link rel="prefetch" href="/edehr/assets/js/45.a4386a06.js"><link rel="prefetch" href="/edehr/assets/js/46.20f57f29.js"><link rel="prefetch" href="/edehr/assets/js/47.d5df0019.js"><link rel="prefetch" href="/edehr/assets/js/48.4488b13d.js"><link rel="prefetch" href="/edehr/assets/js/49.dbf47e1a.js"><link rel="prefetch" href="/edehr/assets/js/5.deccecdd.js"><link rel="prefetch" href="/edehr/assets/js/6.562a2bf6.js"><link rel="prefetch" href="/edehr/assets/js/7.d9cd885e.js"><link rel="prefetch" href="/edehr/assets/js/8.bc8df461.js"><link rel="prefetch" href="/edehr/assets/js/9.4005eac9.js">
    <link rel="stylesheet" href="/edehr/assets/css/0.styles.345de456.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/edehr/" class="home-link router-link-active"><!----> <span class="site-name">EdEHR a prototype project</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/edehr/lms-admin/" class="nav-link">LMS admin</a></div><div class="nav-item"><a href="/edehr/course-designer/" class="nav-link">Course designer</a></div><div class="nav-item"><a href="/edehr/instructor/" class="nav-link">Instructor</a></div><div class="nav-item"><a href="/edehr/developer/" class="nav-link router-link-active">Developer</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/edehr/lms-admin/" class="nav-link">LMS admin</a></div><div class="nav-item"><a href="/edehr/course-designer/" class="nav-link">Course designer</a></div><div class="nav-item"><a href="/edehr/instructor/" class="nav-link">Instructor</a></div><div class="nav-item"><a href="/edehr/developer/" class="nav-link router-link-active">Developer</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/edehr/" class="sidebar-link">EdEHR</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/configuration/" class="sidebar-heading clickable"><span>Configuration</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/lms-admin/" class="sidebar-heading clickable"><span>LMS Admin</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/instructor/" class="sidebar-heading clickable"><span>Instructor guide</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/course-designer/" class="sidebar-heading clickable"><span>Course designer guide</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/developer/" class="sidebar-heading clickable router-link-active open"><span>Developer guide</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/edehr/developer/contributors.html" class="sidebar-link">Contributing to the EdEHR open source project</a></li><li><a href="/edehr/developer/devop/" class="sidebar-link">DevOps</a></li><li><a href="/edehr/developer/devop/technical-architecture.html" class="sidebar-link">Technical Architecture</a></li><li><a href="/edehr/developer/devop/deploy.html" class="sidebar-link">Deploy instructions</a></li><li><a href="/edehr/developer/inside/" class="sidebar-link">Electronic health record system</a></li><li><a href="/edehr/developer/inside-generator/" class="sidebar-link">EHR Definitions and Code Generation</a></li><li><a href="/edehr/developer/inside-generator/ehr-defs-pages.html" class="sidebar-link">EHR Definitions - Pages and Menus</a></li><li><a href="/edehr/developer/inside-generator/ehr-defs-keys.html" class="sidebar-link">EHR Definitions - Keys and Identifiers</a></li><li><a href="/edehr/developer/inside-generator/ehr-defs-input-types.html" class="sidebar-link">EHR Definitions - Input Types</a></li><li><a href="/edehr/developer/inside-generator/ehr-defs-location.html" class="sidebar-link">EHR Definitions - Location and Styling within the UI</a></li><li><a href="/edehr/developer/inside-generator/ehr-calculated-values.html" class="sidebar-link">EdEHR calculated values component</a></li><li><a href="/edehr/developer/inside-custom/" class="sidebar-link">EHR Specialized Pages</a></li><li><a href="/edehr/developer/inside-custom/med-admin-records.html" class="active sidebar-link">Medication Administration Records - MAR</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#schedule-periods-perioddefs" class="sidebar-link">Schedule Periods -- PeriodDefs</a></li><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#medication-orders" class="sidebar-link">Medication Orders</a></li><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#mar" class="sidebar-link">MAR</a></li><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#mar-page" class="sidebar-link">MAR page</a></li><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#mar-today" class="sidebar-link">MAR Today</a></li><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#mar-summary" class="sidebar-link">MAR Summary</a></li><li class="sidebar-sub-header"><a href="/edehr/developer/inside-custom/med-admin-records.html#algorithm-to-collate-medication-orders-and-mars-into-periods" class="sidebar-link">Algorithm to collate Medication Orders and MARs into Periods</a></li></ul></li><li><a href="/edehr/developer/inside-custom/summary-table.html" class="sidebar-link">Summary Table Component</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/shared/definitions" class="sidebar-heading clickable"><span>Glossary</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/edehr/shared/license" class="sidebar-heading clickable"><span>License</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="medication-administration-records-mar"><a href="#medication-administration-records-mar" aria-hidden="true" class="header-anchor">#</a> Medication Administration Records - MAR</h1> <blockquote><p>The MAR page is highly customized and complex page that tracks the administration of medications that were entered on the medication orders page. Medication and scheduling details are brought in and compared to the actual medications and time that they were administered.</p></blockquote> <h2 id="schedule-periods-perioddefs"><a href="#schedule-periods-perioddefs" aria-hidden="true" class="header-anchor">#</a> Schedule Periods -- PeriodDefs</h2> <p>In this prototype EdEHR we had the challenge to define when a medication is scheduled. For the
sake of a simple first attempt we chose to create arbitrary schedule times:</p> <ul><li>breakfast</li> <li>breakfast</li> <li>midmorning</li> <li>lunch</li> <li>midafternoon</li> <li>dinner</li></ul> <p>These values are dynamically based on the Medication Order page definitions as defined by the
Inputs spreadsheet. See the <code>PeriodDefs</code> class for the algorithm used to construct these
periods based on the definitions.</p> <p>Much of the logic is based on this set of time periods. Each singular time period is called a <code>PeriodDef</code>
The set is plural and called <code>PeriodDefs</code></p> <h2 id="medication-orders"><a href="#medication-orders" aria-hidden="true" class="header-anchor">#</a> Medication Orders</h2> <div class="language- extra-class"><pre class="language-text"><code>let sampleMedicationOrder = {
  name: 'Joe',
  profession: 'N',
  day: '0',
  time: '0:00',
  notes: 'ipsum',
  medication: 'ASA',
  route: 'oral',
  reason: 'sick',
  scheduleType: 'scheduled',
  breakfast: true,
  midafternoon: undefined,
  midmorning: undefined,
  dinner: true,
  lunch: true,
  createdDate: '2019-03-14T15:03:36-07:00',
}
</code></pre></div><p>(NB. The structure may change and the periods may be nested under a group.)</p> <h3 id="medication-order-active-status"><a href="#medication-order-active-status" aria-hidden="true" class="header-anchor">#</a> Medication Order - Active Status</h3> <p>In a professional EHR the medication order has the concept of being active or not. Sometimes this is managed by setting a start
date and end date. This prototype makes no attempt to manage this status, yet the algorithm below shows how
this might play.</p> <h2 id="mar"><a href="#mar" aria-hidden="true" class="header-anchor">#</a> MAR</h2> <p>A MAR is a record of the administration of a set of medications. Each record contains</p> <ul><li>who administered the medication</li> <li>the scheduled time for the medication to be administered (one key from from the set of <code>PeriodDefs</code>)</li> <li>the actual time administered (24hr clock)</li> <li>a list of the medication orders that have been administered in the past</li> <li>an optional comment</li></ul> <div class="language- extra-class"><pre class="language-text"><code>let sample = {
  medAdminRec: {
    lastUpdate: '2019-03-24T15:33:20-07:00',
    table: [
      {
        whoAdministered: 'N',
        day: 0,
        actualTime: '9:00',
        comment: 'no comment',
        scheduledTime: 'breakfast',
        medications: [
          {
            name: 'Joe',
            profession: 'N',
            day: '0',
            time: '0:00',
            medication: 'ASA',
            route: 'oral',
            reason: 'sick',
            scheduleType: 'scheduled',
            breakfast: true,
            midmorning: false,
            lunch: true,
            midafternoon: false,
            dinner: true,
            createdDate: '2019-03-14T15:03:36-07:00'
          }
        ]
      }
    ]
  }
}
</code></pre></div><h2 id="mar-page"><a href="#mar-page" aria-hidden="true" class="header-anchor">#</a> MAR page</h2> <p>MAR is an acronym for Medication Administration Record. The MAR page has two tabs: Today and Summary.</p> <h2 id="mar-today"><a href="#mar-today" aria-hidden="true" class="header-anchor">#</a> MAR Today</h2> <p>The Today tab contains a list of medications that are due to be administered to the patient today. It is organized by general time periods of a day. This list currently ranges from breakfast to bedtime, but in the future should be from 00:00 to 24:00. A time period will only be displayed if there is a medication scheduled for that time.</p> <p>Each time period is displayed with (and only displayed if there is available) the associated medication list and administration status. If a medication order is scheduled, but has not yet been given, an &quot;Add administation record&quot; button will be available for the user to enter the needed data. The button will only be shown for the first period of the day that lacks an administration record.</p> <h2 id="mar-summary"><a href="#mar-summary" aria-hidden="true" class="header-anchor">#</a> MAR Summary</h2> <p>The summary tab holds every given and missed medication administration. It matches and pulls from the entered data on the Medications Orders page, and is combined with each medication administration record (stored as data for this MAR page).</p> <p>Each medication will have a status of given or not given for each MAR.</p> <p>We can see a challenge as the number of active days in the assignment grows beyond a few days. For this prototype we
ignore this problem yet it needs to be addressed for a larger system. One option is to place an afordance like a filter on the page
to select MARs for a particular day.</p> <h2 id="algorithm-to-collate-medication-orders-and-mars-into-periods"><a href="#algorithm-to-collate-medication-orders-and-mars-into-periods" aria-hidden="true" class="header-anchor">#</a> Algorithm to collate Medication Orders and MARs into Periods</h2> <ol><li><p>Initialize</p> <ol><li>Let <code>cDay</code> (current day) = 0</li> <li>Initial list of <code>PeriodDefs</code></li></ol></li> <li><p>If there are no medication orders then</p> <ol><li>Done (There are no periods needing a MAR. The Today page is empty)</li></ol></li> <li><p>Let <code>mOrders</code> = the list of medication orders (filtered to only include active orders)</p> <ol><li>For each period let period.mOrders = mOrders filtered to the those scheduled for the period. (e.g. For the
'breakfast' period select all medications that have 'breakfast === true'</li> <li>Filter the PeriodDefs list to only contain periods that have medications scheduled.</li></ol></li> <li><p>If there are no MAR records then</p> <ol><li>Done (No MAR records so all the periods with scheduled medications need a MAR)</li></ol></li> <li><p>Set up today</p> <ol><li>Let <code>cDay</code> = the max day in all MAR records.</li> <li>Let <code>marRecs</code> = MAR Records filtered to the cDay</li></ol></li> <li><p>If there are no <code>marRecs</code> for the current day then</p> <ol><li>Done (No MAR records for current day so all the periods with scheduled medications need a MAR)</li></ol></li> <li><p>For each <code>mRec</code> in <code>marRecs</code> find the <code>period</code> in <code>PeriodDefs</code>. Let <code>period.marRec = mRec</code></p> <blockquote><p>At this point, each period has <code>mOrders</code>. If this list is not empty then the period may also have a <code>marRec</code></p></blockquote></li> <li><p>If all periods have a marRec then</p> <ol><li>Let cDay = cDay + 1</li> <li>Clear marRecs from all periods</li> <li>Done</li></ol> <blockquote><p>This situation happens when the last day is full</p></blockquote></li></ol> <blockquote><p>If we reach this point then the current day has at least one scheduled period that has some medications prescribed and no
MAR record. Display as per described above (MAR Current Day)</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/edehr/developer/inside-custom/" class="prev router-link-active">EHR Specialized Pages</a></span> <span class="next"><a href="/edehr/developer/inside-custom/summary-table.html">Summary Table Component</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/edehr/assets/js/app.359ae618.js" defer></script><script src="/edehr/assets/js/2.4b83f28f.js" defer></script><script src="/edehr/assets/js/27.9258d714.js" defer></script>
  </body>
</html>
